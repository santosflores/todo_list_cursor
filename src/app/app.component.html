<div class="app-container">
  <!-- Header -->
  <header class="app-header">
    <h1>{{ title }}</h1>
    <button 
      class="btn btn-primary" 
      (click)="showTaskForm()"
      [class.hidden]="showForm()"
      type="button">
      Add Task
    </button>
  </header>

  <!-- Task Creation Form -->
  @if (showForm()) {
    <div class="task-form-container">
      <form 
        class="task-form" 
        [formGroup]="taskForm" 
        (ngSubmit)="createTask()"
        novalidate>
        
        <h2>Create New Task</h2>
        
        <div class="form-group">
          <label for="title">Title *</label>
          <input 
            id="title"
            type="text" 
            formControlName="title" 
            placeholder="Enter task title..."
            [class.error]="getErrorMessage('title')"
            maxlength="128">
          @if (getErrorMessage('title')) {
            <div class="error-message">{{ getErrorMessage('title') }}</div>
          }
        </div>
        
        <div class="form-group">
          <label for="description">Description</label>
          <textarea 
            id="description"
            formControlName="description" 
            placeholder="Enter task description..."
            rows="3"
            [class.error]="getErrorMessage('description')"
            maxlength="256"></textarea>
          @if (getErrorMessage('description')) {
            <div class="error-message">{{ getErrorMessage('description') }}</div>
          }
        </div>
        
        <div class="form-actions">
          <button 
            type="button" 
            class="btn btn-secondary" 
            (click)="hideTaskForm()">
            Cancel
          </button>
          <button 
            type="submit" 
            class="btn btn-primary" 
            [disabled]="!taskForm.valid">
            Create Task
          </button>
        </div>
      </form>
    </div>
  }

  <!-- Tasks List -->
  <main class="tasks-container">
    @if (allTasks().length === 0) {
      <div class="empty-state">
        <p>No tasks yet. Create your first task to get started!</p>
      </div>
    } @else {
      <div class="tasks-list">
        <h2>All Tasks ({{ allTasks().length }})</h2>
        @for (task of allTasks(); track task.id) {
          <app-task-card 
            [task]="task"
            (deleteTask)="onDeleteTask($event)" />
        }
      </div>
    }
  </main>
</div>

<router-outlet />